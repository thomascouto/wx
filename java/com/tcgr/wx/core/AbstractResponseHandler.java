package com.tcgr.wx.core;import android.app.ProgressDialog;import android.content.Context;import android.content.DialogInterface;import com.loopj.android.http.SaxAsyncHttpResponseHandler;import com.tcgr.wx.R;import org.xml.sax.helpers.DefaultHandler;import cz.msebera.android.httpclient.Header;import static com.tcgr.wx.core.Async.getClient;/** * * Created by thomas on 17/05/16. */public abstract class AbstractResponseHandler extends SaxAsyncHttpResponseHandler<DefaultHandler> {    protected ProgressDialog progressDialog;    private Context context;    protected boolean canceled = false;    /**     * Constructs new SaxAsyncHttpResponseHandler with given handler instance     *     * @param defaultHandler instance of Handler extending DefaultHandler     * @param context Context     * @see DefaultHandler     */    public AbstractResponseHandler(DefaultHandler defaultHandler, Context context) {        super(defaultHandler);        this.context = context;        progressDialog = ProgressDialog.show(context, "", context.getString(R.string.aguarde), true, true);    }    @Override    public void onFailure(int i, Header[] headers, DefaultHandler defaultHandler) {        progressDialog.dismiss();        Util.alert(context, context.getResources().getString(R.string.tente_novamente));    }    @Override    public void onStart() {        progressDialog.setOnCancelListener(new DialogInterface.OnCancelListener() {            @Override            public void onCancel(DialogInterface dialog) {                canceled = true;                getClient().cancelAllRequests(true);            }        });    }}